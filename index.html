<html>
<head>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.4/dist/leaflet.css"
      integrity="sha512-puBpdR0798OZvTTbP4A8Ix/l+A4dHDD0DGqYW6RQ+9jxkRFclaxxQb/SJAWZfWAkuyeQUytO7+7N4QKrDh+drA=="
      crossorigin=""/>
      <!-- Make sure you put this AFTER Leaflet's CSS -->
<script src="https://unpkg.com/leaflet@1.3.4/dist/leaflet.js"
  integrity="sha512-nMMmRyTVoLYqjP9hrbed9S+FzjZHW5gY1TWCHA5ckwXZBadntCNs8kEqAWdrb9O7rxbCaA4lKTIWjDXZxflOcA=="
  crossorigin=""></script>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.css">
<script src="https://cdn.jsdelivr.net/npm/leaflet-easybutton@2/src/easy-button.js"></script>

  <style>
      #map{ height: 512px ; width: 512px;}
      .leaflet-container {
        background: #dddddd;
    }
    </style>
</head>

<body>
    <div id="map"></div>
    <!--
    <form>
    Invert <input type="checkbox" name="checkfield" id="invert"  onchange="redraw()"/>
    </form>
  -->
    <button onclick="redraw()">Redraw</button>


      <script>

      // initialize the map
      var map = L.map('map', {
        dragging: true,
        zoomDelta: 0.5,
        }).setView([0,0], 0);

      // load a tile layer
      var layer = L.tileLayer('http://localhost:8899/?x={x}&y={y}&z={z}&inv={inv}',
        {
          inv: 0,
          maxZoom: 5,
          minZoom: 1,
          tileSize: 256,
          noWrap: true,
          crs: L.CRS.Simple
        })

        map.addLayer(layer);

        var southWest = map.unproject([0, 8192], map.getMaxZoom());
        var northEast = map.unproject([8192, 0], map.getMaxZoom());
        map.setMaxBounds(new L.LatLngBounds(southWest, northEast));

        L.easyButton( '<span class="star">&starf;</span>', function(){
          if (layer.options.inv == 0) {
            layer.options.inv = 1 ;
          }
          else {
            layer.options.inv = 0;
          }
          layer.redraw();
        }).addTo(map);


        function redraw() {
          //var inv = document.getElementById('invert');
          //if (inv.checked) {
          //  layer.options.inv = 1;
          //}
          //else {
          //  layer.options.inv = 0;
          //}
          layer.redraw();
        }

      </script>

</body>
</html>
